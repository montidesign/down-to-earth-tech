---
interface Props {
  phoneNumber?: string;
  phoneDisplay?: string;
}

const {
  phoneNumber = "254-294-9499",
  phoneDisplay = "(254) 294-9499"
} = Astro.props;

const navItems = [
  { label: "Managed IT Services", labelDesktop: "MANAGED IT SERVICES", href: "/managed-it-services" },
  { label: "Servers and Workstations", labelDesktop: "SERVERS AND WORKSTATIONS", href: "/servers-workstations" },
  { label: "Network Support", labelDesktop: "NETWORK SUPPORT", href: "/network-support" },
  { label: "Business Surveillance", labelDesktop: "BUSINESS SURVEILLANCE", href: "/business-surveillance" },
  { label: "Data Hub", labelDesktop: "DATA HUB", href: "/data-hub" },
  { label: "About Us", labelDesktop: "ABOUT US", href: "/about-us" },
  { label: "Contact", labelDesktop: "CONTACT", href: "/contact" },
  { label: "Support", labelDesktop: "SUPPORT", href: "/support" }
];
---

<header
  class="bg-[#E24D3D] fixed top-0 left-0 right-0 z-50 transition-transform duration-300 -translate-y-full"
  x-data="{
    mobileMenuOpen: false,
    scrolled: false,
    init() {
      window.addEventListener('scroll', () => {
        this.scrolled = window.scrollY > 860;
      });
    }
  }"
  :class="scrolled ? 'translate-y-0' : ''"
>
  <!-- Phone Number -->
  <div class="relative">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-center py-3">
        <a
          href={`tel:${phoneNumber}`}
          class="flex items-center gap-2 text-white hover:text-white/80 transition-colors leading-none"
          aria-label={`Call us at ${phoneDisplay}`}
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="flex-shrink-0">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
          </svg>
          <span class="font-bold text-xl font-roboto leading-none">{phoneDisplay}</span>
        </a>
      </div>
    </div>
  </div>

  <!-- Mobile Select Page Button -->
  <div class="lg:hidden pt-12 pb-3">
    <div class="container mx-auto px-4">
      <button
        @click="mobileMenuOpen = !mobileMenuOpen"
        class="w-full flex items-center justify-between py-3 px-4 bg-red-800 text-white font-cuprum rounded"
        aria-label="Toggle mobile menu"
        aria-expanded="false"
        :aria-expanded="mobileMenuOpen.toString()"
      >
        <span>Select Page</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="4" x2="20" y1="12" y2="12"/>
          <line x1="4" x2="20" y1="6" y2="6"/>
          <line x1="4" x2="20" y1="18" y2="18"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Logo (desktop only) -->
  <div class="hidden lg:block">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-center py-4">
        <a href="/" aria-label="Down to Earth Technology Home">
          <img
            src="/media/it-consulting.png"
            alt="Down to Earth Technology Logo"
            class="h-12 w-auto"
          />
        </a>
      </div>
    </div>
  </div>

  <!-- Desktop Navigation -->
  <nav class="hidden lg:block" aria-label="Primary navigation">
    <div class="container mx-auto px-4">
      <ul class="flex items-center justify-center gap-1 py-3">
        {navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="px-3 py-2 text-white font-bold tracking-wider hover:bg-white/10 transition-colors rounded font-abel"
              style="font-size: .9375rem;"
            >
              {item.labelDesktop}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>

  <!-- Mobile Navigation -->
  <nav
    x-show="mobileMenuOpen"
    x-cloak
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-2"
    x-transition:enter-end="opacity-100 translate-y-0"
    x-transition:leave="transition ease-in duration-150"
    x-transition:leave-start="opacity-100 translate-y-0"
    x-transition:leave-end="opacity-0 -translate-y-2"
    class="lg:hidden"
    aria-label="Mobile navigation"
  >
    <div class="container mx-auto px-4">
      <ul class="pb-4 space-y-2">
        {navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="block px-4 py-2 text-white hover:bg-white/10 transition-colors font-cuprum"
            >
              {item.label}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </nav>
</header>

<style>
  [x-cloak] {
    display: none !important;
  }
</style>
